{"version":3,"sources":["scripts/app.js"],"names":["angular","module","PropertiesRecordsController","$firebaseArray","AppF","FirebaseF","$q","FbStorage","toastr","$log","go","property","isDefined","params","propertyId","$id","deleteImage","promise","deferred","defer","then","resolve","error","log","deleteProperty","properties","promises","count","forEach","updates","images","image","push","child","name","uid","root","update","all","vm","selected","info","init","loadList","this","isOpen","$inject","controller","PropertiesRecordController","$scope","$mdDialog","clearObjectFilter","$state","fileExtensionFilter","openAddDialog","obj","title","object","confirm","prompt","placeholder","ariaLabel","ok","cancel","show","result","objToSave","lang","addElement","localReferences","loading","prepareObject","reference","snap","id","key","node","index","array","splice","addMarker","event","editGps","ll","latLng","gps","lat","lng","goBack","addRow","element","deleteRow","deletePropertyImage","imageObj","saveProperty","propertyPrivate","files","saveText","savePropertyFB","data","warning","verifyAddOption","action","uploadFile","uploadTask","resp","status","on","url","snapshot","downloadURL","isUndefined","filesReferences","uploadTasks","file","imageId","newName","originalName","put","reject","loadObject","$loaded","blancProperty","blancPropertyPrivate","googleMapsUrl","owners","intermediaries","webDevTec","getTec","description","logo","service","acmeNavbar","NavbarController","moment","relativeDate","creationDate","fromNow","directive","restrict","templateUrl","scope","controllerAs","bindToController","acmeMalarkey","malarkey","linkFunc","el","attr","watcher","typist","typeSpeed","deleteSpeed","pauseDelay","loop","postfix","addClass","extraValues","value","type","pause","$watch","contributors","contributor","login","$on","MalarkeyController","githubContributor","activate","getContributors","template","link","$http","limit","getContributorsComplete","response","getContributorsFailed","toJson","get","apiHost","factory","MainController","$timeout","$mdSidenav","firebase","AuthF","buildToggler","componentId","toggle","F","FBF","toggleLeft","toggleRight","LoginController","$firebaseAuth","signIn","firebaseUser","auth","$signInWithEmailAndPassword","formData","email","password","showToastrWarning","message","classAnimation","showToastr","msg","fileExtension","fileExtensionFn","filename","split","pop","filter","clearObject","clearObjectFn","copy","newObject","runBlock","$rootScope","FB_CONFIG","initializeApp","debug","toState","toParams","fromState","fromParams","onAuthStateChanged","run","routerConfig","$stateProvider","$urlRouterProvider","$locationProvider","$translatePartialLoaderProvider","$translateProvider","useLoader","urlTemplate","preferredLanguage","addPart","html5Mode","state","currentAuthF","$requireSignIn","views","content@admin","otherwise","config","storage","ref","database","menu","icon","$firebaseObject","saved","date","ServerValue","TIMESTAMP","user","currentUser","updated","loadNode","lists","item","ob","objects","constant","apiKey","authDomain","databaseURL","storageBucket","messagingSenderId","$logProvider","toastrConfig","debugEnabled","allowHtml","timeOut","positionClass","preventDuplicates","progressBar","$templateCache"],"mappings":"CAAA,WACE,YAEAA,SACGC,OAAO,gBAAiB,YAAa,eAAgB,YAAa,aAAc,aAAc,yBAA0B,SAAU,YAAa,aAAc,SAAU,WAAY,QAAS,qBAIjM,WACE,YAOA,SAASC,GAA4BC,EAAgBC,EAAMC,EAAWC,EAAIC,EAAWC,EAAQC,GAS3F,QAASC,GAAGC,GACV,GAAIX,QAAQY,UAAUD,IAAkC,gBAArB,GAA+B,CAChE,GAAIE,IACFF,SAAUA,EACVG,WAAYH,EAASI,IAEvBX,GAAKM,GAAG,2BAA4BG,OAEpCT,GAAKM,GAAG,4BAIZ,QAASM,GAAYC,GACnB,GAAIC,GAAWZ,EAAGa,OAOlB,OANAF,GAAQG,KAAK,WACXF,EAASG,SAAQ,IAChB,SAAUC,GACXb,EAAKc,IAAID,GACTJ,EAASG,SAAQ,KAEZH,EAASD,QAGlB,QAASO,GAAeC,GACtB,GAAIC,MACAC,EAAQ,CACZ3B,SAAQ4B,QAAQH,EAAY,SAAUd,GACpCgB,GACA,IAAIE,KACJ7B,SAAQ4B,QAAQjB,EAASmB,OAAQ,SAAUC,GACzCL,EAASM,KAAKhB,EAAYT,EAAU0B,MAAM,UAAYtB,EAASI,IAAM,IAAMgB,EAAMG,MAAvD3B,cAC1BsB,EAAQ,UAAYE,EAAMI,KAAO,OAGnCN,EAAQ,cAAgBlB,EAASI,KAAO,KACxCc,EAAQ,qBAAuBlB,EAASI,KAAO,KAC/CN,EAAKc,IAAIM,GACTH,EAASM,KAAK5B,EAAKgC,KAAKC,OAAOR,MAEjCvB,EAAGgC,IAAIZ,GAAUN,KAAK,WACpBmB,EAAGC,YACHhC,EAAOiC,KAAK,iBAAmBd,EAAQ,oBAK3C,QAASe,KACPrC,EAAUsC,UAAU,YAAa,WAAY,eAvD/C,GAAIJ,GAAKK,IAETL,GAAGC,YACHD,EAAGM,QAAS,EAEZN,EAAG7B,GAAKA,EACR6B,EAAGf,eAAiBA,EAoDpBkB,IAhEFxC,EAA4B4C,SAAW,iBAAkB,OAAQ,YAAa,KAAM,YAAa,SAAU,QAA3G9C,QACGC,OAAO,gBACP8C,WAAW,8BAA+B7C,MAkE/C,WACE,YAOA,SAAS8C,GAA2BC,EAAQC,EAAW9C,EAAM+C,EAAmB3C,EAAQ4C,EAAQ/C,EAAWI,EAAMF,EAAWD,EAAI+C,GAyB9H,QAASC,GAAcC,GACrB,GAAIC,GAAQ,EACZ,QAAQD,EAAIE,QACV,IAAK,WACHD,EAAQ,4BACR,MACF,KAAK,UACHA,EAAQ,iCAGZ,GAAIE,GAAUR,EAAUS,SACrBH,MAAMA,GACNI,YAAY,UACZC,UAAUL,GACVM,GAAG,WACHC,OAAO,WACVb,GAAUc,KAAKN,GAAStC,KAAK,SAAU6C,GACrC,GAAIC,KACJA,GAAU3B,EAAG4B,OACXjC,KAAM+B,GAER1B,EAAG6B,WAAWF,EAAWX,KAI7B,QAASa,GAAWX,EAAQY,GAC1BjE,EAAKkE,SAAU,EACfb,EAASpD,EAAUkE,cAAcd,GACjCrD,EAAKgC,KAAKH,MAAMoC,EAAgBG,WAAWxC,KAAKyB,GAAQrC,KAAK,SAAUqD,GACrE,GAAIC,GAAKD,EAAKE,GACdpC,GAAG8B,EAAgBO,MAAMP,EAAgBZ,QAAUiB,EACnDtE,EAAKkE,SAAU,EACf9D,EAAOiC,KAAK,kCAIhB,QAASzB,GAAY6D,EAAOC,GAC1BA,EAAMC,OAAOF,EAAO,GAGtB,QAASG,GAAUC,GACjB,GAAI1C,EAAG2C,QAAS,CACd,GAAIC,GAAKF,EAAMG,MACf7C,GAAG5B,SAAS0E,KACVC,IAAKH,EAAGG,MACRC,IAAKJ,EAAGI,QAKd,QAASC,KACPpF,EAAKM,GAAG,oBAGV,QAAS+E,GAAOC,EAASd,GACvBrC,EAAGqC,GAAMc,GAAS1D,SAGpB,QAAS2D,GAAUD,EAASb,EAAMD,GAChCrC,EAAGqC,GAAMc,GAASX,OAAOF,EAAO,GAGlC,QAASe,GAAoBC,EAAU/E,GAErC,GAAIiB,GAAQxB,EAAU0B,MAAM,UAAYnB,EAAa,IAAM+E,EAAS3D,KAEpEH,GAAAA,YAAeX,KAAK,WAElB,GAAIS,KACJA,GAAQ,UAAYgE,EAAS1D,KAAO,KACpCN,EAAQ,cAAgBf,EAAa,WAAa+E,EAAS1D,KAAO,KAClE/B,EAAKgC,KAAKC,OAAOR,GAAST,KAAK,WAC7BZ,EAAOiC,KAAK,yBACX,SAAUnB,GACXb,EAAKc,IAAID,OARbS,SAUS,SAAUT,GACjBb,EAAKc,IAAID,KAIb,QAASwE,GAAanF,EAAUoF,EAAiBC,GAC/C5F,EAAKkE,SAAU,EACf/B,EAAG0D,SAAW,eACdC,EAAevF,EAAUoF,GAAiB3E,KAAK,SAAU+E,GACvD3F,EAAOiC,KAAK,0BACZrC,EAAKkE,SAAU,EACf/B,EAAGiD,UACF,SAAUlE,GACXd,EAAO4F,QAAQ9E,KAInB,QAAS+E,GAAgBX,GACC,gBAApB,IACoB,OAAlBA,EAAQY,eACH/D,GAAGmD,EAAQd,MAAMc,EAAQjC,QAChClB,EAAGe,cAAcoC,IAMvB,QAASa,GAAWC,GAClB,GAAItF,GAAWZ,EAAGa,QACdsF,GACFC,QAAQ,EAcV,OAZAF,GAAWG,GAAG,gBAAiB,aAI5B,SAAUrF,GACXmF,EAAKnF,MAAQA,EACbJ,EAASG,QAAQoF,IAChB,WACDA,EAAKC,QAAS,EACdD,EAAKG,IAAMJ,EAAWK,SAASC,YAC/B5F,EAASG,QAAQoF,KAEZvF,EAASD,QAGlB,QAASiF,GAAevF,EAAUoF,GAChC,GAAI7E,GAAWZ,EAAGa,QACdO,KACAZ,EAAa,EAyDjB,OAxDAH,GAAWN,EAAUkE,cAAc5D,GACnCoF,EAAkB1F,EAAUkE,cAAcwB,GAExCjF,EADEd,QAAQY,UAAUD,EAASI,KAChBJ,EAASI,IAETX,EAAKgC,KAAKH,MAAM,cAAcD,OAAO2C,IAEpDjD,EAASM,KAAK5B,EAAKgC,KAAKH,MAAM,cAAgBnB,GAAYuB,OAAOc,EAAkBxC,KACnFe,EAASM,KAAK5B,EAAKgC,KAAKH,MAAM,qBAAuBnB,GAAYuB,OAAOc,EAAkB4C,KAC1FzF,EAAGgC,IAAIZ,GAAUN,KAAK,SAAU+E,GAE9B,GADInG,QAAQ+G,YAAYpG,EAASI,OAAMwB,EAAG5B,SAASI,IAAMD,GACrDd,QAAQY,UAAU2B,EAAGyD,OAAQ,CAC/B,GAAIgB,MACAC,IACJjH,SAAQ4B,QAAQW,EAAGyD,MAAO,SAAUkB,EAAMrC,GACxC,GAAIsC,GAAU/G,EAAKgC,KAAKH,MAAM,UAAUD,OAAO2C,IAC3CyC,EAAUD,EAAU,IAAM9D,EAAoB6D,EAAKhF,KACvD8E,GAAgBnC,IACdH,GAAIyC,EACJtC,MAAOA,EACPwC,aAAcH,EAAKhF,KACnBkF,QAASA,GAEXH,EAAYpC,GAAS0B,EAAWhG,EAAU0B,MAAM,UAAYM,EAAG5B,SAASI,IAAM,IAAMqG,GAASE,IAAIJ,MAEnG5G,EAAGgC,IAAI2E,GAAa7F,KAAK,SAAUqF,GACjC,GAAI5E,KACJ7B,SAAQ4B,QAAQ6E,EAAM,SAAUN,EAAMtB,GACpC,GAAIsB,EAAKO,OAAQ,CACf,GAAIS,GAAUH,EAAgBnC,GAAOH,SAC9BsC,GAAgBnC,GAAOH,GAC9BsC,EAAgBnC,GAAO+B,IAAMT,EAAKS,IAClC/E,EAAQ,UAAYsF,GAAWH,EAAgBnC,GAC/ChD,EAAQ,cAAgBlB,EAASI,IAAM,WAAaoG,IAClDP,IAAKT,EAAKS,IACV1E,KAAM8E,EAAgBnC,GAAOuC,QAC7BjF,IAAKgF,GAGT5E,EAAGyD,MAAMjB,OAAOF,EAAO,KAEzBpE,EAAKc,IAAIM,GACTzB,EAAKgC,KAAKC,OAAOR,GAAST,KAAK,WAC7BF,EAASG,QAAQ8E,IAChB,SAAU7E,GACXJ,EAASqG,OAAOjG,OAGpBJ,EAASG,QAAQ8E,OAEjBjF,GAASG,QAAQ8E,IAGlB,SAAU7E,GACXJ,EAASqG,OAAOjG,KAEXJ,EAASD,QAGlB,QAASyB,KACHU,EAAOvC,OAAOF,UAChB4B,EAAG5B,SAAWyC,EAAOvC,OAAOF,SAC5B4B,EAAGwD,gBAAkB1F,EAAUmH,WAAW,oBAAqBjF,EAAG5B,SAASI,MAClEqC,EAAOvC,OAAOC,YACvByB,EAAG5B,SAAWN,EAAUmH,WAAW,aAAcpE,EAAOvC,OAAOC,YAC/DyB,EAAG5B,SAAS8G,UAAUrG,KAAK,WACzBmB,EAAGwD,gBAAkB1F,EAAUmH,WAAW,oBAAqBjF,EAAG5B,SAASI,SAG7EwB,EAAG5B,SAAW4B,EAAGmF,cACjBnF,EAAGwD,gBAAkBxD,EAAGoF,sBAE1BtH,EAAUsC,UAAU,YAAa,aA/NnC,GAAIJ,GAAKK,IAETL,GAAG2C,SAAU,EACb3C,EAAG0D,SAAW,oBACd1D,EAAGqF,cAAgB,sFACnBrF,EAAGmF,iBACHnF,EAAGoF,sBACDE,YACAC,mBAIFvF,EAAGe,cAAgBA,EACnBf,EAAG6B,WAAaA,EAChB7B,EAAGvB,YAAcA,EACjBuB,EAAGyC,UAAYA,EACfzC,EAAGiD,OAASA,EACZjD,EAAGkD,OAASA,EACZlD,EAAGoD,UAAYA,EACfpD,EAAGqD,oBAAsBA,EACzBrD,EAAGuD,aAAeA,EAClBvD,EAAG8D,gBAAkBA,EA8MrB3D,IAxOFM,EAA2BF,SAAW,SAAU,YAAa,OAAQ,oBAAqB,SAAU,SAAU,YAAa,OAAQ,YAAa,KAAM,uBADtJ9C,QACGC,OAAO,gBACP8C,WAAW,6BAA8BC,MA2O9C,WACE,YAOA,SAAS+E,KAsDP,QAASC,KACP,MAAO7B,GAtDT,GAAIA,KAEA3C,MAAS,YACToD,IAAO,yBACPqB,YAAe,8BACfC,KAAQ,gBAGR1E,MAAS,cACToD,IAAO,yBACPqB,YAAe,4CACfC,KAAQ,oBAGR1E,MAAS,SACToD,IAAO,qBACPqB,YAAe,8BACfC,KAAQ,aAGR1E,MAAS,UACToD,IAAO,4BACPqB,YAAe,8BACfC,KAAQ,gBAGR1E,MAAS,QACToD,IAAO,iCACPqB,YAAe,0CACfC,KAAQ,cAGR1E,MAAS,aACToD,IAAO,wCACPqB,YAAe,oFACfC,KAAQ,mBAGR1E,MAAS,0BACToD,IAAO,oCACPqB,YAAe,sFACfC,KAAQ,yBAGR1E,MAAS,OACToD,IAAO,sBACPqB,YAAe,oHACfC,KAAQ,YAIZtF,MAAKoF,OAASA,EAzDhBhI,QACKC,OAAO,gBACPkI,QAAQ,YAAaJ,MAgE5B,WACE,YASA,SAASK,KAaP,QAASC,GAAiBC,GACxB,GAAI/F,GAAKK,IAGTL,GAAGgG,aAAeD,EAAO/F,EAAGiG,cAAcC,UAhB5CJ,EAAiBvF,SAAW,SAF5B,IAAI4F,IACFC,SAAU,IACVC,YAAa,oCACbC,OACIL,aAAc,KAElBzF,WAAYsF,EACZS,aAAc,KACdC,kBAAkB,EAGpB,OAAOL,GAjBT1I,QACGC,OAAO,gBACPyI,UAAU,aAAcN,MA4B7B,WACE,YAWA,SAASY,GAAaC,GAUpB,QAASC,GAASL,EAAOM,EAAIC,EAAM7G,GACjC,GAAI8G,GACAC,EAASL,EAASE,EAAG,IACvBI,UAAW,GACXC,YAAa,GACbC,WAAY,IACZC,MAAM,EACNC,QAAS,KAGXR,GAAGS,SAAS,iBAEZ5J,QAAQ4B,QAAQiH,EAAMgB,YAAa,SAASC,GAC1CR,EAAOS,KAAKD,GAAOE,QAAnBV,cAGFD,EAAUR,EAAMoB,OAAO,kBAAmB,WACxCjK,QAAQ4B,QAAQW,EAAG2H,aAAc,SAASC,GACxCb,EAAOS,KAAKI,EAAYC,OAAOJ,QAA/BV,gBAIJT,EAAMwB,IAAI,WAAY,WACpBhB,MAKJ,QAASiB,GAAmB7J,EAAM8J,GAOhC,QAASC,KACP,MAAOC,KAAkBrJ,KAAK,WAC5BX,EAAKgC,KAAK,iCAId,QAASgI,KACP,MAAOF,GAAkBE,gBAAgB,IAAIrJ,KAAK,SAAS+E,GAGzD,MAFA5D,GAAG2H,aAAe/D,EAEX5D,EAAG2H,eAhBd,GAAI3H,GAAKK,IAETL,GAAG2H,gBAEHM,IA1CFF,EAAmBxH,SAAW,OAAQ,oBAJtC,IAAI4F,IACFC,SAAU,IACVE,OACEgB,YAAa,KAEfa,SAAU,SACVC,KAAMzB,EACNnG,WAAYuH,EACZxB,aAAc,KAGhB,OAAOJ,GAdTM,EAAalG,SAAW,YAHxB9C,QACGC,OAAO,gBACPyI,UAAU,eAAgBM,MAuE/B,WACE,YAOA,SAASuB,GAAkB9J,EAAMmK,GAU/B,QAASH,GAAgBI,GASvB,QAASC,GAAwBC,GAC/B,MAAOA,GAAS5E,KAGlB,QAAS6E,GAAsB1J,GAC7Bb,EAAKa,MAAM,oCAAsCtB,QAAQiL,OAAO3J,EAAM6E,MAAM,IAT9E,MAJK0E,KACHA,EAAQ,IAGHD,EAAMM,IAAIC,EAAU,0BAA4BN,GACpDzJ,KAAK0J,GADDF,SAEEI,GAhBX,GAAIG,GAAU,4DAEVhD,GACFgD,QAASA,EACTV,gBAAiBA,EAGnB,OAAOtC,GARToC,EAAkBzH,SAAW,OAAQ,SALrC9C,QACGC,OAAO,gBACPmL,QAAQ,oBAAqBb,MAiClC,WACE,YAOA,SAASc,GAAeC,EAAUvD,EAAWwD,EAAY/K,EAAQJ,EAAMoL,EAAUrL,EAAgBgD,EAAmBsI,EAAOpL,GAWzH,QAASqL,GAAaC,GACpB,MAAO,YACLJ,EAAWI,GAAaC,UAZ5B,GAAIrJ,GAAKK,IACTL,GAAG4B,KAAO,KACV5B,EAAGkJ,MAAQA,EACXlJ,EAAGsJ,EAAIzL,EACPmC,EAAGuJ,IAAMzL,EACTkC,EAAGkJ,MAAQA,EACXlJ,EAAG+B,SAAU,EACb/B,EAAGwJ,WAAaL,EAAa,QAC7BnJ,EAAGyJ,YAAcN,EAAa,SARhCL,EAAevI,SAAW,WAAY,YAAa,aAAc,SAAU,OAAQ,WAAY,iBAAkB,oBAAqB,QAAS,aAN/I9C,QACGC,OAAO,gBACP8C,WAAW,iBAAkBsI,MAsBlC,WACE,YAOA,SAASY,GAAgBX,EAAU9K,EAAQ0L,EAAezL,EAAK2C,GAU7D,QAAS+I,KACP5J,EAAG6J,aAAe,KAClB7J,EAAGjB,MAAQ,KACX+K,EAAKC,4BAA4B/J,EAAGgK,SAASC,MAAOjK,EAAGgK,SAASE,UAAUrL,KAAK,SAAUgL,GACvF7J,EAAG6J,aAAeA,EAClBhJ,EAAO1C,GAAG,sBAFZ2L,SAGS,SAAU/K,GACjBiB,EAAGjB,MAAQA,EACXb,EAAKc,IAAID,GACToL,EAAkBpL,EAAMqL,WAI5B,QAASnC,KACPc,EAAS,WACP/I,EAAGqK,eAAiB,cACnB,KAGL,QAASC,KACPrM,EAAOiC,KAAK,oHACZF,EAAGqK,eAAiB,GAGtB,QAASF,GAAkBI,GACzBtM,EAAOc,MAAMwL,GACbvK,EAAGqK,eAAiB,GAnCtB,GAAIrK,GAAKK,KACLyJ,EAAOH,GAEX3J,GAAGqK,eAAiB,GACpBrK,EAAGsK,WAAaA,EAChBtK,EAAG4J,OAASA,EAEZ3B,IANFyB,EAAgBnJ,SAAW,WAAY,SAAU,gBAAiB,OAAQ,UAP1E9C,QACGC,OAAO,gBACP8C,WAAW,kBAAmBkJ,MA8ClC,WACC,YAMA,SAASc,KAIP,QAASC,GAAgBC,GACvB,MAAOA,GAASC,MAAM,KAAKC,MAH7B,MAAOH,GANThN,QACGC,OAAO,gBACPmN,OAAO,gBAAiBL,MAa5B,WACG,YAMA,SAASM,KAIL,QAASC,GAAc7J,GACnBA,EAASzD,QAAQuN,KAAK9J,EACtB,IAAI+J,KAeJ,OAdAxN,SAAQ4B,QAAQ6B,EAAQ,SAASqG,EAAOjF,GACpC,OAAQA,GACJ,IAAK,YACD,KACJ,KAAK,MACD,KACJ,KAAK,SACD,KACJ,SACI2I,EAAU3I,GAASiF,KAKxB0D,EAnBX,MAAOF,GANXtN,QACKC,OAAO,gBACPmN,OAAO,cAAeC,MA4B/B,WACE,YAOA,SAASI,GAASC,EAAYjN,EAAMkN,EAAWnC,EAAUpI,GACvDoI,EAASoC,cAAcD,EACvB,IAAItB,GAAOb,EAASa,MACpB5L,GAAKoN,MAAM,gBAEXH,EAAWrD,IAAI,oBAAqB,SAAUpF,EAAO6I,EAASC,EAAUC,EAAWC,EAAY3M,GAG/E,kBAAVA,GACF8B,EAAO1C,GAAG,WAId2L,EAAK6B,mBAAmB,SAAU9B,GAC5BA,GAGFhJ,EAAO1C,GAAG,WAdhB+M,EAAS3K,SAAW,aAAc,OAAQ,YAAa,WAAY,UARnE9C,QACGC,OAAO,gBACPkO,IAAIV,MA6BT,WACE,YAOA,SAASW,GAAaC,EAAgBC,EAAoBC,EAAmBC,EAAiCC,GAC5GA,EAAmBC,UAAU,2BAC3BC,YAAa,4BAEfF,EAAmBG,kBAAkB,MAGrCJ,EAAgCK,QAAQ,OAExCN,EAAkBO,WAAU,GAC5BT,EACGU,MAAM,SACLnI,IAAK,SACLgC,YAAa,qBACb7F,WAAY,iBACZ+F,aAAc,OACdzH,SACE2N,cAAiB,QAAS,SAAUvD,GAClC,MAAOA,GAAMwD,sBAIlBF,MAAM,oBACLnI,IAAK,cACLsI,OACEC,iBACEvG,YAAa,WACX,MAAO,2DAET7F,WAAY,8BACZ+F,aAAc,mBAGlBzH,SACE2N,cAAiB,QAAS,SAAUvD,GAClC,MAAOA,GAAMwD,sBAIlBF,MAAM,4BACLnI,IAAK,uBACL/F,QACEF,UAAS,EACTG,WAAW,MAEboO,OACEC,iBACEvG,YAAa,WACX,MAAO,yDAET7F,WAAY,6BACZ+F,aAAc,iBAGlBzH,SACE2N,cAAiB,QAAS,SAAUvD,GAClC,MAAOA,GAAMwD,sBAKlBF,MAAM,SACLnI,IAAK,SACLgC,YAAa,uBACb7F,WAAY,kBACZ+F,aAAc,SAElBwF,EAAmBc,UAAU,qBA/D/BhB,EAAatL,SAAW,iBAAkB,qBAAsB,oBAAqB,kCAAmC,sBATxH9C,QACGC,OAAO,gBACPoP,OAAOjB,MA2EZ,WACE,YASA,SAAS3C,GAAMS,GACb,MAAOA,KAGT,QAAS3L,GAAUiL,GACjB,MAAOA,GAAS8D,UAAUC,MAG5B,QAASnP,GAAKgD,EAAQoI,GAWpB,QAAS9K,GAAGqO,EAAOlO,GACbb,QAAQY,UAAUC,IAA8B,gBAAnB,GAC/BuC,EAAO1C,GAAGqO,EAAOlO,GAEjBuC,EAAO1C,GAAGqO,GAdd,GAAIxL,IACF7C,GAAIA,EACJ0B,KAAMoJ,EAASgE,WAAWD,IAAI,KAC9BE,OACEC,KAAM,QACNxN,KAAM,cACN6M,MAAO,qBAWX,OAAOxL,GAGT,QAASlD,GAAUF,EAAgBC,EAAMoL,EAAUmE,GAOjD,QAASpL,GAAchB,GAYrB,MAXIvD,SAAQ+G,YAAYxD,EAAIqM,OAC1BrM,EAAIqM,OACFC,KAAMrE,EAASgE,SAASM,YAAYC,UACpCC,KAAMxE,EAASa,OAAO4D,YAAY9N,KAGpCoB,EAAI2M,SACFL,KAAMrE,EAASgE,SAASM,YAAYC,UACpCC,KAAMxE,EAASa,OAAO4D,YAAY9N,KAG/BoB,EAGT,QAAS4M,GAASvL,GACZ5E,QAAQ+G,YAAYxD,EAAI6M,SAAQ7M,EAAI6M,UACpCpQ,QAAQ+G,YAAYxD,EAAI6M,MAAMxL,MAAQrB,EAAI6M,MAAMxL,GAAQzE,EAAeC,EAAKgC,KAAKH,MAAM2C,KAG7F,QAASjC,GAAS0N,GAChB,aAAQ,IACN,IAAK,SACHrQ,QAAQ4B,QAAQyO,EAAM,SAAUC,GAC9BH,EAASG,IAEX,MACF,KAAK,SACHH,EAASE,IAKf,QAAS7I,GAAWhD,EAAWE,GAI7B,MAHI1E,SAAQ+G,YAAYxD,EAAIgN,WAAUhN,EAAIgN,YACtCvQ,QAAQ+G,YAAYxD,EAAIgN,QAAQ/L,MAAajB,EAAIgN,QAAQ/L,OACzDxE,QAAQ+G,YAAYxD,EAAIgN,QAAQ/L,GAAWE,MAAMnB,EAAIgN,QAAQ/L,GAAWE,GAAMiL,EAAgBvP,EAAKgC,KAAKH,MAAMuC,GAAWvC,MAAMyC,KAC5HnB,EAAIgN,QAAQ/L,GAAWE,GA3ChC,GAAInB,IACFZ,SAAUA,EACV4B,cAAeA,EACfiD,WAAYA,EA2Cd,OAAOjE,GAzETkI,EAAM3I,SAAW,iBACjB1C,EAAK0C,SAAW,SAAU,YAC1BzC,EAAUyC,SAAW,iBAAkB,OAAQ,WAAY,mBAC3DvC,EAAUuC,SAAW,YAbrB9C,QACGC,OAAO,gBACPmL,QAAQ,QAASK,GACjBL,QAAQ,OAAQhL,GAChBgL,QAAQ,YAAa/K,GACrB+K,QAAQ,YAAa7K,MAoF1B,WACE,YAEAP,SACGC,OAAO,gBACPuQ,SAAS,WAAYvH,UACrBuH,SAAS,SAAUlI,QACnBkI,SAAS,aACRC,OAAQ,0CACRC,WAAY,qCACZC,YAAa,4CACbC,cAAe,iCACfC,kBAAmB,oBAKzB,WACE,YAOA,SAASxB,GAAOyB,EAAcC,GAE5BD,EAAaE,cAAa,GAG1BD,EAAaE,WAAY,EACzBF,EAAaG,QAAU,IACvBH,EAAaI,cAAgB,kBAC7BJ,EAAaK,mBAAoB,EACjCL,EAAaM,aAAc,EAA7BhC,EAAOvM,SAAW,eAAgB,gBAdlC9C,QACGC,OAAO,gBACPoP,OAAOA,MAiBZrP,QAAQC,OAAO,gBAAgBkO,KAAK,iBAAkB,SAASmD,GAAiBA,EAAehK,IAAI,uBAAuB,60CAC1HgK,EAAehK,IAAI,qBAAqB,g4BACxCgK,EAAehK,IAAI,oCAAoC,idACvDgK,EAAehK,IAAI,wDAAwD,w5OAC3EgK,EAAehK,IAAI,0DAA0D","file":"scripts/app-eada41b49b.js","sourcesContent":["(function () {\n  'use strict';\n\n  angular\n    .module('myproperties', ['ngAnimate', 'ngFileUpload', 'ngCookies', 'ngSanitize', 'ngMessages', 'pascalprecht.translate', 'ngAria', 'ui.router', 'ngMaterial', 'toastr', 'firebase', 'ngMap', 'md.data.table']);\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('myproperties')\n    .controller('PropertiesRecordsController', PropertiesRecordsController);\n\n  /** @ngInject */\n  function PropertiesRecordsController($firebaseArray, AppF, FirebaseF, $q, FbStorage, toastr, $log) {\n    var vm = this;\n    //variables\n    vm.selected = [];\n    vm.isOpen = false;\n    //functions\n    vm.go = go;\n    vm.deleteProperty = deleteProperty;\n\n    function go(property) {\n      if (angular.isDefined(property) && typeof (property) == \"object\") {\n        var params = {\n          property: property,\n          propertyId: property.$id\n        }\n        AppF.go(\"admin.properties.details\", params);\n      } else {\n        AppF.go(\"admin.properties.details\");\n      }\n    }\n\n    function deleteImage(promise) {\n      var deferred = $q.defer();\n      promise.then(function () {\n        deferred.resolve(true)\n      }, function (error) {\n        $log.log(error);\n        deferred.resolve(true)\n      })\n      return deferred.promise;\n    }\n\n    function deleteProperty(properties) {\n      var promises = [];\n      var count = 0;\n      angular.forEach(properties, function (property) {\n        count++;\n        var updates = {};\n        angular.forEach(property.images, function (image) {\n          promises.push(deleteImage(FbStorage.child('images/' + property.$id + '/' + image.name).delete()));\n          updates[\"images/\" + image.uid] = null;\n        })\n\n        updates[\"properties/\" + property.$id] = null;\n        updates[\"propertiesPrivate/\" + property.$id] = null;\n        $log.log(updates)\n        promises.push(AppF.root.update(updates));\n      })\n      $q.all(promises).then(function () {\n        vm.selected = [];\n        toastr.info(\"Se eliminaron \" + count + \" propiedad(es)\");\n      });\n    }\n\n    //other functions\n    function init() {\n      FirebaseF.loadList([\"saleTypes\", \"docTypes\", \"properties\"]);\n    }\n\n    init();\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('myproperties')\n    .controller('PropertiesRecordController', PropertiesRecordController);\n\n  /** @ngInject */\n  function PropertiesRecordController($scope, $mdDialog, AppF, clearObjectFilter, toastr, $state, FirebaseF, $log, FbStorage, $q, fileExtensionFilter) {\n    var vm = this;\n    //variables\n    vm.editGps = false;\n    vm.saveText = \"Guardar Propiedad\";\n    vm.googleMapsUrl = \"https://maps.googleapis.com/maps/api/js?key=AIzaSyCyA-BPAOyFhVGBMCXS9fB5Yc6Dioh2360\";\n    vm.blancProperty = {};\n    vm.blancPropertyPrivate = {\n      owners: [{}],\n      intermediaries: []\n    };\n\n    //functions in scope\n    vm.openAddDialog = openAddDialog;\n    vm.addElement = addElement;\n    vm.deleteImage = deleteImage;\n    vm.addMarker = addMarker;\n    vm.goBack = goBack;\n    vm.addRow = addRow;\n    vm.deleteRow = deleteRow;\n    vm.deletePropertyImage = deletePropertyImage;\n    vm.saveProperty = saveProperty\n    vm.verifyAddOption = verifyAddOption\n\n\n    function openAddDialog(obj) {\n      var title = \"\";\n      switch (obj.object) {\n        case \"saleType\":\n          title = \"Añadir nuevo tipo de venta\";\n          break;\n        case \"docType\":\n          title = \"Añadir nuevo tipo de documento\";\n          break;\n      }\n      var confirm = $mdDialog.prompt()\n        .title(title)\n        .placeholder('Nombre')\n        .ariaLabel(title)\n        .ok('Aceptar')\n        .cancel('Cancelar');\n      $mdDialog.show(confirm).then(function (result) {\n        var objToSave = {};\n        objToSave[vm.lang] = {\n          name: result\n        }\n        vm.addElement(objToSave, obj);\n      });\n    }\n\n    function addElement(object, localReferences) {\n      AppF.loading = true;\n      object = FirebaseF.prepareObject(object);\n      AppF.root.child(localReferences.reference).push(object).then(function (snap) {\n        var id = snap.key;\n        vm[localReferences.node][localReferences.object] = id;\n        AppF.loading = false;\n        toastr.info(\"Se añadio elemento con exito\");\n      });\n    }\n\n    function deleteImage(index, array) {\n      array.splice(index, 1);\n    }\n\n    function addMarker(event) {\n      if (vm.editGps) {\n        var ll = event.latLng;\n        vm.property.gps = {\n          lat: ll.lat(),\n          lng: ll.lng()\n        }\n      }\n    }\n\n    function goBack() {\n      AppF.go(\"admin.properties\");\n    }\n\n    function addRow(element, node) {\n      vm[node][element].push({});\n    }\n\n    function deleteRow(element, index,node) {\n      vm[node][element].splice(index, 1);\n    }\n\n    function deletePropertyImage(imageObj, propertyId) {\n      // Create a reference to the file to delete\n      var image = FbStorage.child('images/' + propertyId + '/' + imageObj.name);\n      // Delete the file\n      image.delete().then(function () {\n        // File deleted successfully\n        var updates = {};\n        updates[\"images/\" + imageObj.uid] = null;\n        updates[\"properties/\" + propertyId + \"/images/\" + imageObj.uid] = null;\n        AppF.root.update(updates).then(function () {\n          toastr.info(\"Se elimino la imagen\");\n        }, function (error) {\n          $log.log(error);\n        });\n      }).catch(function (error) {\n        $log.log(error);\n      });\n    }\n\n    function saveProperty(property, propertyPrivate, files) {\n      AppF.loading = true;\n      vm.saveText = \"Guardando...\";\n      savePropertyFB(property, propertyPrivate).then(function (data) {\n        toastr.info(\"Se guardo la propiedad\");\n        AppF.loading = false;\n        vm.goBack();\n      }, function (error) {\n        toastr.warning(error);\n      });\n    }\n\n    function verifyAddOption(element) {\n      if (typeof (element) == \"object\") {\n        if (element.action == \"add\") {\n          delete vm[element.node][element.object];\n          vm.openAddDialog(element);\n        }\n      }\n    }\n\n    //other functions\n    function uploadFile(uploadTask) {\n      var deferred = $q.defer();\n      var resp = {\n        status: false\n      };\n      uploadTask.on('state_changed', function () {\n        // uploadTask.on('state_changed', function (snapshot) {\n        // Observe state change events such as progress, pause, and resume\n        // See below for more detail\n      }, function (error) {\n        resp.error = error;\n        deferred.resolve(resp);\n      }, function () {\n        resp.status = true;\n        resp.url = uploadTask.snapshot.downloadURL;\n        deferred.resolve(resp);\n      });\n      return deferred.promise;\n    }\n\n    function savePropertyFB(property, propertyPrivate) {\n      var deferred = $q.defer();\n      var promises = [];\n      var propertyId = \"\";\n      property = FirebaseF.prepareObject(property);\n      propertyPrivate = FirebaseF.prepareObject(propertyPrivate);\n      if (angular.isDefined(property.$id)) {\n        propertyId = property.$id;\n      } else {\n        propertyId = AppF.root.child('properties').push().key;\n      }\n      promises.push(AppF.root.child(\"properties/\" + propertyId).update(clearObjectFilter(property)));\n      promises.push(AppF.root.child(\"propertiesPrivate/\" + propertyId).update(clearObjectFilter(propertyPrivate)));\n      $q.all(promises).then(function (data) {\n        if (angular.isUndefined(property.$id)) vm.property.$id = propertyId\n        if (angular.isDefined(vm.files)) {\n          var filesReferences = {};\n          var uploadTasks = {};\n          angular.forEach(vm.files, function (file, index) {\n            var imageId = AppF.root.child('images').push().key;\n            var newName = imageId + \".\" + fileExtensionFilter(file.name);\n            filesReferences[index] = {\n              id: imageId,\n              index: index,\n              originalName: file.name,\n              newName: newName\n            };\n            uploadTasks[index] = uploadFile(FbStorage.child('images/' + vm.property.$id + '/' + newName).put(file));\n          })\n          $q.all(uploadTasks).then(function (resp) {\n            var updates = {};\n            angular.forEach(resp, function (data, index) {\n              if (data.status) {\n                var imageId = filesReferences[index].id;\n                delete filesReferences[index].id;\n                filesReferences[index].url = data.url;\n                updates[\"images/\" + imageId] = filesReferences[index];\n                updates[\"properties/\" + property.$id + \"/images/\" + imageId] = {\n                  url: data.url,\n                  name: filesReferences[index].newName,\n                  uid: imageId\n                };\n              }\n              vm.files.splice(index, 1);\n            })\n            $log.log(updates);\n            AppF.root.update(updates).then(function () {\n              deferred.resolve(data);\n            }, function (error) {\n              deferred.reject(error);\n            });\n          });\n          deferred.resolve(data);\n        } else {\n          deferred.resolve(data);\n        }\n\n      }, function (error) {\n        deferred.reject(error);\n      });\n      return deferred.promise;\n    }\n\n    function init() {\n      if ($state.params.property) {\n        vm.property = $state.params.property;\n        vm.propertyPrivate = FirebaseF.loadObject(\"propertiesPrivate\", vm.property.$id);\n      } else if ($state.params.propertyId) {\n        vm.property = FirebaseF.loadObject(\"properties\", $state.params.propertyId);\n        vm.property.$loaded().then(function () {\n          vm.propertyPrivate = FirebaseF.loadObject(\"propertiesPrivate\", vm.property.$id);\n        });\n      } else {\n        vm.property = vm.blancProperty;\n        vm.propertyPrivate = vm.blancPropertyPrivate;\n      }\n      FirebaseF.loadList([\"saleTypes\", \"docTypes\"])\n    }\n\n    //se inicia la carga\n    init();\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n      .module('myproperties')\n      .service('webDevTec', webDevTec);\n\n  /** @ngInject */\n  function webDevTec() {\n    var data = [\n      {\n        'title': 'AngularJS',\n        'url': 'https://angularjs.org/',\n        'description': 'HTML enhanced for web apps!',\n        'logo': 'angular.png'\n      },\n      {\n        'title': 'BrowserSync',\n        'url': 'http://browsersync.io/',\n        'description': 'Time-saving synchronised browser testing.',\n        'logo': 'browsersync.png'\n      },\n      {\n        'title': 'GulpJS',\n        'url': 'http://gulpjs.com/',\n        'description': 'The streaming build system.',\n        'logo': 'gulp.png'\n      },\n      {\n        'title': 'Jasmine',\n        'url': 'http://jasmine.github.io/',\n        'description': 'Behavior-Driven JavaScript.',\n        'logo': 'jasmine.png'\n      },\n      {\n        'title': 'Karma',\n        'url': 'http://karma-runner.github.io/',\n        'description': 'Spectacular Test Runner for JavaScript.',\n        'logo': 'karma.png'\n      },\n      {\n        'title': 'Protractor',\n        'url': 'https://github.com/angular/protractor',\n        'description': 'End to end test framework for AngularJS applications built on top of WebDriverJS.',\n        'logo': 'protractor.png'\n      },\n      {\n        'title': 'Angular Material Design',\n        'url': 'https://material.angularjs.org/#/',\n        'description': 'The Angular reference implementation of the Google\\'s Material Design specification.',\n        'logo': 'angular-material.png'\n      },\n      {\n        'title': 'Less',\n        'url': 'http://lesscss.org/',\n        'description': 'Less extends the CSS language, adding features that allow variables, mixins, functions and many other techniques.',\n        'logo': 'less.png'\n      }\n    ];\n\n    this.getTec = getTec;\n\n    function getTec() {\n      return data;\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('myproperties')\n    .directive('acmeNavbar', acmeNavbar);\n\n  /** @ngInject */\n  function acmeNavbar() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/navbar/navbar.html',\n      scope: {\n          creationDate: '='\n      },\n      controller: NavbarController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function NavbarController(moment) {\n      var vm = this;\n\n      // \"vm.creationDate\" is available by directive option \"bindToController: true\"\n      vm.relativeDate = moment(vm.creationDate).fromNow();\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('myproperties')\n    .directive('acmeMalarkey', acmeMalarkey);\n\n  /** @ngInject */\n  function acmeMalarkey(malarkey) {\n    var directive = {\n      restrict: 'E',\n      scope: {\n        extraValues: '='\n      },\n      template: '&nbsp;',\n      link: linkFunc,\n      controller: MalarkeyController,\n      controllerAs: 'vm'\n    };\n\n    return directive;\n\n    function linkFunc(scope, el, attr, vm) {\n      var watcher;\n      var typist = malarkey(el[0], {\n        typeSpeed: 40,\n        deleteSpeed: 40,\n        pauseDelay: 800,\n        loop: true,\n        postfix: ' '\n      });\n\n      el.addClass('acme-malarkey');\n\n      angular.forEach(scope.extraValues, function(value) {\n        typist.type(value).pause().delete();\n      });\n\n      watcher = scope.$watch('vm.contributors', function() {\n        angular.forEach(vm.contributors, function(contributor) {\n          typist.type(contributor.login).pause().delete();\n        });\n      });\n\n      scope.$on('$destroy', function () {\n        watcher();\n      });\n    }\n\n    /** @ngInject */\n    function MalarkeyController($log, githubContributor) {\n      var vm = this;\n\n      vm.contributors = [];\n\n      activate();\n\n      function activate() {\n        return getContributors().then(function() {\n          $log.info('Activated Contributors View');\n        });\n      }\n\n      function getContributors() {\n        return githubContributor.getContributors(10).then(function(data) {\n          vm.contributors = data;\n\n          return vm.contributors;\n        });\n      }\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('myproperties')\n    .factory('githubContributor', githubContributor);\n\n  /** @ngInject */\n  function githubContributor($log, $http) {\n    var apiHost = 'https://api.github.com/repos/Swiip/generator-gulp-angular';\n\n    var service = {\n      apiHost: apiHost,\n      getContributors: getContributors\n    };\n\n    return service;\n\n    function getContributors(limit) {\n      if (!limit) {\n        limit = 30;\n      }\n\n      return $http.get(apiHost + '/contributors?per_page=' + limit)\n        .then(getContributorsComplete)\n        .catch(getContributorsFailed);\n\n      function getContributorsComplete(response) {\n        return response.data;\n      }\n\n      function getContributorsFailed(error) {\n        $log.error('XHR Failed for getContributors.\\n' + angular.toJson(error.data, true));\n      }\n    }\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('myproperties')\n    .controller('MainController', MainController);\n\n  /** @ngInject */\n  function MainController($timeout, webDevTec, $mdSidenav, toastr, AppF, firebase, $firebaseArray, clearObjectFilter, AuthF, FirebaseF) {\n    var vm = this;\n    vm.lang = \"es\";\n    vm.AuthF = AuthF;\n    vm.F = AppF;\n    vm.FBF = FirebaseF;\n    vm.AuthF = AuthF;\n    vm.loading = false;\n    vm.toggleLeft = buildToggler('left');\n    vm.toggleRight = buildToggler('right');\n\n    function buildToggler(componentId) {\n      return function () {\n        $mdSidenav(componentId).toggle();\n      };\n    }\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('myproperties')\n    .controller('LoginController', LoginController);\n\n  /** @ngInject */\n  function LoginController($timeout, toastr, $firebaseAuth, $log,$state) {\n    var vm = this;\n    var auth = $firebaseAuth();\n\n    vm.classAnimation = '';\n    vm.showToastr = showToastr;\n    vm.signIn = signIn;\n\n    activate();\n\n    function signIn() {\n      vm.firebaseUser = null;\n      vm.error = null;\n      auth.$signInWithEmailAndPassword(vm.formData.email, vm.formData.password).then(function (firebaseUser) {\n        vm.firebaseUser = firebaseUser;\n        $state.go(\"admin.properties\");\n      }).catch(function (error) {\n        vm.error = error;\n        $log.log(error);\n        showToastrWarning(error.message)\n      });\n    }\n\n    function activate() {\n      $timeout(function () {\n        vm.classAnimation = 'rubberBand';\n      }, 4000);\n    }\n\n    function showToastr() {\n      toastr.info('Fork <a href=\"https://github.com/Swiip/generator-gulp-angular\" target=\"_blank\"><b>generator-gulp-angular</b></a>');\n      vm.classAnimation = '';\n    }\n\n    function showToastrWarning(msg) {\n      toastr.error(msg);\n      vm.classAnimation = '';\n    }\n\n\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('myproperties')\n    .filter('fileExtension', fileExtension)\n\n  function fileExtension() {\n\n    return fileExtensionFn;\n\n    function fileExtensionFn(filename) {\n      return filename.split('.').pop();\n    }\n  }\n\n}());\n\n(function() {\n    'use strict';\n\n    angular\n        .module('myproperties')\n        .filter('clearObject', clearObject)\n\n    function clearObject() {\n\n        return clearObjectFn;\n\n        function clearObjectFn(object) {\n            object = angular.copy(object);\n            var newObject = {};\n            angular.forEach(object, function(value, index) {\n                switch (index) {\n                    case \"$priority\":\n                        break;\n                    case \"$id\":\n                        break;\n                    case \"$$conf\":\n                        break;\n                    default:\n                        newObject[index] = value;\n                        break;\n                }\n\n            });\n            return newObject;\n        }\n    }\n\n}());\n(function () {\n  'use strict';\n\n  angular\n    .module('myproperties')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($rootScope, $log, FB_CONFIG, firebase, $state) {\n    firebase.initializeApp(FB_CONFIG);\n    var auth = firebase.auth();\n    $log.debug('runBlock end');\n\n    $rootScope.$on(\"$stateChangeError\", function (event, toState, toParams, fromState, fromParams, error) {\n      // We can catch the error thrown when the $requireSignIn promise is rejected\n      // and redirect the user back to the home page\n      if (error === \"AUTH_REQUIRED\") {\n        $state.go(\"login\");\n      }\n    });\n\n    auth.onAuthStateChanged(function (firebaseUser) {\n      if (firebaseUser) {\n        //console.log(\"Signed in as:\", firebaseUser.uid);\n      } else {\n        $state.go(\"login\");\n      }\n    });\n  }\n\n\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('myproperties')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider, $locationProvider, $translatePartialLoaderProvider, $translateProvider) {\n    $translateProvider.useLoader('$translatePartialLoader', {\n      urlTemplate: '{part}/i18n/{lang}.json'\n    });\n    $translateProvider.preferredLanguage('es');\n    //$translateProvider.useSanitizeValueStrategy('sanitize');\n\n    $translatePartialLoaderProvider.addPart('app');\n\n    $locationProvider.html5Mode(true);\n    $stateProvider\n      .state('admin', {\n        url: '/admin',\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'main',\n        resolve: {\n          \"currentAuthF\": [\"AuthF\", function (AuthF) {\n            return AuthF.$requireSignIn();\n          }]\n        }\n      })\n      .state('admin.properties', {\n        url: '/properties',\n        views: {\n          'content@admin': {\n            templateUrl: function () {\n              return 'app/main/views/propertiesRecords/propertiesRecords.html';\n            },\n            controller: 'PropertiesRecordsController',\n            controllerAs: 'propertiesCtrl'\n          }\n        },\n        resolve: {\n          \"currentAuthF\": [\"AuthF\", function (AuthF) {\n            return AuthF.$requireSignIn();\n          }]\n        }\n      })\n      .state('admin.properties.details', {\n        url: '/details/:propertyId',\n        params:{\n          property:false,\n          propertyId:null\n        },\n        views: {\n          'content@admin': {\n            templateUrl: function () {\n              return 'app/main/views/propertiesRecord/propertiesRecord.html';\n            },\n            controller: 'PropertiesRecordController',\n            controllerAs: 'propertyCtrl'\n          }\n        },\n        resolve: {\n          \"currentAuthF\": [\"AuthF\", function (AuthF) {\n            return AuthF.$requireSignIn();\n          }]\n        }\n      })\n\n      .state('login', {\n        url: '/login',\n        templateUrl: 'app/login/login.html',\n        controller: 'LoginController',\n        controllerAs: 'main'\n      });\n    $urlRouterProvider.otherwise('/admin/properties');\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('myproperties')\n    .factory(\"AuthF\", AuthF)\n    .factory(\"AppF\", AppF)\n    .factory(\"FirebaseF\", FirebaseF)\n    .factory(\"FbStorage\", FbStorage);\n\n  function AuthF($firebaseAuth) {\n    return $firebaseAuth();\n  }\n\n  function FbStorage(firebase) {\n    return firebase.storage().ref();\n  }\n\n  function AppF($state, firebase) {\n    var obj = {\n      go: go,\n      root: firebase.database().ref('/'),\n      menu: [{\n        icon: \"label\",\n        name: \"Propiedades\",\n        state: \"admin.properties\"\n      }]\n    };\n\n    function go(state, params) {\n      if (angular.isDefined(params) && typeof (params) == \"object\")\n        $state.go(state, params);\n      else\n        $state.go(state);\n    }\n\n    return obj;\n  }\n\n  function FirebaseF($firebaseArray, AppF, firebase, $firebaseObject) {\n    var obj = {\n      loadList: loadList,\n      prepareObject: prepareObject,\n      loadObject: loadObject\n    };\n\n    function prepareObject(obj) {\n      if (angular.isUndefined(obj.saved)) {\n        obj.saved = {\n          date: firebase.database.ServerValue.TIMESTAMP,\n          user: firebase.auth().currentUser.uid\n        }\n      } else {\n        obj.updated = {\n          date: firebase.database.ServerValue.TIMESTAMP,\n          user: firebase.auth().currentUser.uid\n        }\n      }\n      return obj;\n    }\n\n    function loadNode(node) {\n      if (angular.isUndefined(obj.lists)) obj.lists = {}\n      if (angular.isUndefined(obj.lists[node])) obj.lists[node] = $firebaseArray(AppF.root.child(node));\n    }\n\n    function loadList(item) {\n      switch (typeof (item)) {\n        case \"object\":\n          angular.forEach(item, function (ob) {\n            loadNode(ob)\n          });\n          break;\n        case \"string\":\n          loadNode(item)\n          break;\n      }\n    }\n\n    function loadObject(reference, id) {\n      if (angular.isUndefined(obj.objects)) obj.objects = {};\n      if (angular.isUndefined(obj.objects[reference])) obj.objects[reference] = {};\n      if (angular.isUndefined(obj.objects[reference][id])) obj.objects[reference][id] = $firebaseObject(AppF.root.child(reference).child(id));\n      return obj.objects[reference][id]\n    }\n\n    return obj;\n  }\n\n})();\n\n/* global malarkey:false, moment:false */\n(function () {\n  'use strict';\n\n  angular\n    .module('myproperties')\n    .constant('malarkey', malarkey)\n    .constant('moment', moment)\n    .constant('FB_CONFIG', {\n      apiKey: \"AIzaSyCghgZ-p-Ek11XWf_OCRptlUcTqyA7KI0c\",\n      authDomain: \"myproperties-c4a80.firebaseapp.com\",\n      databaseURL: \"https://myproperties-c4a80.firebaseio.com\",\n      storageBucket: \"myproperties-c4a80.appspot.com\",\n      messagingSenderId: \"234749633393\"\n    });\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('myproperties')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, toastrConfig) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n    // Set options third-party lib\n    toastrConfig.allowHtml = true;\n    toastrConfig.timeOut = 3000;\n    toastrConfig.positionClass = 'toast-top-right';\n    toastrConfig.preventDuplicates = true;\n    toastrConfig.progressBar = true;\n  }\n\n})();\n\nangular.module(\"myproperties\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/login/login.html\",\"<md-content layout=row layout-align=space-around layout-padding=layout-padding ng-cloak=ng-cloak class=login-form><md-card flex=flex flex-gt-sm=50 flex-gt-md=33><md-toolbar><div class=md-toolbar-tools><h2><span>{{\\'loginPage.formName\\' | translate}}</span></h2></div></md-toolbar><md-card-content><form name=Form ng-submit=main.signIn()><md-input-container class=md-block><label>{{\\'loginPage.labelUsername\\' | translate}}</label><input type=text name=email ng-model=main.formData.email placeholder=\\\"{{\\'loginPage.inputUsername\\' | translate}}\\\" required><div ng-messages=Form.email.$error role=alert multiple><div ng-message=required class=my-message>{{\\'loginPage.invalidUsername\\' | translate}}</div></div></md-input-container><md-input-container class=md-block><label>{{\\'loginPage.labelPassword\\' | translate}}</label><input type=password name=password ng-model=main.formData.password placeholder=\\\"{{\\'loginPage.inputPassword\\' | translate}}\\\" required md-maxlength=16><div ng-messages=Form.password.$error role=alert multiple><div ng-message=required class=my-message>{{\\'loginPage.invalidPassword\\' | translate}}</div></div></md-input-container><md-button ng-disabled=!Form.$valid type=submit ng-click=main.signIn() class=\\\"md-raised md-primary\\\">&nbsp {{\\'loginPage.buttonLogin\\' | translate}} &nbsp</md-button></form></md-card-content></md-card></md-content>\");\n$templateCache.put(\"app/main/main.html\",\"<div layout=column ng-cloak=ng-cloak layout-fill><md-toolbar flex=nogrow class=md-hue-2><div class=md-toolbar-tools><md-button ng-click=main.toggleLeft()><md-icon>view_headline</md-icon></md-button><h2 flex=nogrow><span>Panel de Administracion</span></h2><span flex></span><div flex=nogrow><md-button ng-click=main.AuthF.$signOut()><md-icon>exit_to_app</md-icon></md-button></div></div></md-toolbar><md-sidenav class=md-sidenav-left md-component-id=left md-disable-backdrop md-whiteframe=4><md-toolbar class=md-theme-indigo><h1 class=md-toolbar-tools>Menu</h1></md-toolbar><md-content><md-list ng-cloak><md-list-item ng-repeat=\\\"item in main.F.menu\\\" ng-click=main.F.go(item.state)><md-icon>{{item.icon?item.icon:\\'label\\'}}</md-icon><p>{{item.name}}</p><md-icon>keyboard_arrow_right</md-icon></md-list-item></md-list></md-content></md-sidenav><div flex ui-view=content layout-fill></div></div>\");\n$templateCache.put(\"app/components/navbar/navbar.html\",\"<md-toolbar layout=row layout-align=\\\"center center\\\"><md-button href=https://github.com/Swiip/generator-gulp-angular>Gulp Angular</md-button><section flex layout=row layout-align=\\\"left center\\\"><md-button href=# class=md-raised>Home</md-button><md-button href=# class=md-raised>About</md-button><md-button href=# class=md-raised>Contact</md-button></section><md-button class=acme-navbar-text>Application was created {{ vm.relativeDate }}.</md-button></md-toolbar>\");\n$templateCache.put(\"app/main/views/propertiesRecord/propertiesRecord.html\",\"<md-content layout-padding=layout-padding><div flex layout=row layout-align=\\\"start center\\\"><div flex=nogrow><md-button class=md-icon-button aria-label=\\\"Go Back\\\" ng-click=propertyCtrl.goBack()><md-icon>keyboard_backspace</md-icon></md-button></div><h1 flex=nogrow>Detalles de Propiedad</h1></div><div flex layout=row layout-align=\\\"start center\\\"><h2>Informacion Publica</h2></div><form name=propertyForm><div layout=column layout-gt-xs=row><md-input-container flex><label>Ubicacion</label><input type=text required ng-model=propertyCtrl.property[main.lang].location></md-input-container></div><div layout=column layout-gt-xs=row><md-input-container flex=30><label>M2</label><input required type=number ng-model=propertyCtrl.property[main.lang].meters></md-input-container><md-input-container flex=70><label>Referencia mas cercana</label><input type=text ng-model=propertyCtrl.property[main.lang].closerReference></md-input-container></div><div layout=column layout-gt-xs=row><md-input-container flex><label>Campo Libre</label><input type=text ng-model=propertyCtrl.property[main.lang].other></md-input-container></div><div layout=column layout-align=\\\"start start\\\"><div flex layout=row layout-align=\\\"start center\\\"><h3 flex=nogrow>Imagenes</h3><div flex=nogrow><md-button class=\\\"md-raised md-primary\\\" ngf-select ng-model=propertyCtrl.files name=files ngf-multiple=true ngf-pattern=\\\"\\'image/*\\'\\\" ngf-accept=\\\"\\'image/*\\'\\\" ngf-max-size=20MB ngf-min-height=100>Agregar Imagenes</md-button></div></div></div><div flex><md-grid-list md-cols-xs=1 md-cols-sm=2 md-cols-md=3 md-cols-lg=4 md-cols-gt-lg=5 md-row-height=4:3 md-gutter=1em><md-grid-tile md-colspan=1 ng-repeat=\\\"($index,file) in propertyCtrl.files\\\"><img class=layout-fill ng-show=propertyForm.files.$valid ngf-thumbnail=file><md-grid-tile-footer layout=row layout-align=\\\"end center\\\"><div flex><div layout=row layout-align=\\\"end center\\\"><div flex=nogrow><md-button ng-click=propertyCtrl.deleteImage($index,propertyCtrl.files) class=\\\"md-fab md-mini md-warn md-raised md-hue-2\\\"><md-icon>delete_forever</md-icon></md-button></div></div></div></md-grid-tile-footer></md-grid-tile><md-grid-tile md-colspan=1 ng-repeat=\\\"($index,image) in propertyCtrl.property.images\\\"><img class=layout-fill ng-src={{image.url}} alt=Imagen><md-grid-tile-footer layout=row layout-align=\\\"end center\\\"><div flex=nogrow><md-button ng-click=propertyCtrl.deletePropertyImage(image,propertyCtrl.property.$id) class=\\\"md-fab md-mini md-warn md-raised md-hue-2\\\"><md-icon>delete_forever</md-icon></md-button></div></md-grid-tile-footer></md-grid-tile></md-grid-list></div><div layout=column layout-align=\\\"start start\\\"><div flex layout=row layout-align=\\\"start center\\\"><h3 flex=nogrow>Mapa</h3><div flex=nogrow><md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"propertyCtrl.editGps=!propertyCtrl.editGps\\\">{{propertyCtrl.editGps?\\'Guardar\\':\\'Editar Ubicacion\\'}}</md-button></div></div></div><div layout=column layout-gt-xs=row><div flex><div map-lazy-load=https://maps.google.com/maps/api/js map-lazy-load-params={{propertyCtrl.googleMapsUrl}} height=600px><ng-map center=current-location zoom=9 on-click=propertyCtrl.addMarker()><marker position={{propertyCtrl.property.gps.lat}},{{propertyCtrl.property.gps.lng}}></marker></ng-map></div></div></div><div flex layout=row layout-align=\\\"start center\\\"><h2>Informacion Privada</h2></div><div layout=column layout-gt-xs=row><md-input-container flex><label>Tipo de documento</label><md-select required ng-model=propertyCtrl.propertyPrivate.docType ng-change=propertyCtrl.verifyAddOption(propertyCtrl.propertyPrivate.docType,this)><md-option ng-repeat=\\\"docType in main.FBF.lists.docTypes\\\" ng-value=docType.$id>{{docType[main.lang].name}}</md-option><md-option ng-value=\\\"{action:\\'add\\',object:\\'docType\\',reference:\\'docTypes\\',node:\\'propertyPrivate\\'}\\\">Agregar nuevo</md-option></md-select></md-input-container><md-input-container flex><label>Precio Pactado</label><input required type=number ng-model=propertyCtrl.propertyPrivate.price></md-input-container><md-input-container flex><label>Precio Venta</label><input required type=number ng-model=propertyCtrl.propertyPrivate.salePrice></md-input-container></div><div layout=row layout-align=\\\"start center\\\"><div flex=nogrow><h3>Propietario</h3></div><div flex=nogrow><md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"propertyCtrl.addRow(\\'owners\\',\\'propertyPrivate\\')\\\">Agregar Propietario</md-button></div></div><div layout=column><div flex layout=column layout-gt-xs=row layout ng-repeat=\\\"($index,owner) in propertyCtrl.propertyPrivate.owners\\\"><md-input-container flex><label>Nombre</label><input required type=name ng-model=owner.name></md-input-container><md-input-container flex><label>Telefono</label><input required type=text ng-model=owner.phone></md-input-container><md-input-container flex><label>Correo</label><input type=email ng-model=owner.email></md-input-container><div flex=nogrow><md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"propertyCtrl.deleteRow(\\'owners\\',$index,\\'propertyPrivate\\')\\\">Eliminar</md-button></div></div></div><div layout layout-align=\\\"start center\\\"><div flex=nogrow><h3>Intermediarios</h3></div><div flex=nogrow><md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"propertyCtrl.addRow(\\'intermediaries\\',\\'propertyPrivate\\')\\\">Agregar Intermediario</md-button></div></div><div layout=column><div flex layout=column layout-gt-xs=row ng-repeat=\\\"($index,intermediary) in propertyCtrl.propertyPrivate.intermediaries\\\"><md-input-container flex><label>Nombre</label><input required type=name ng-model=intermediary.name></md-input-container><md-input-container flex><label>Telefono</label><input required type=text ng-model=intermediary.phone></md-input-container><div flex=nogrow><md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"propertyCtrl.deleteRow(\\'intermediaries\\',$index,\\'propertyPrivate\\')\\\">Eliminar</md-button></div></div></div><div layout=column layout-gt-xs=row><md-input-container flex=30><label>Tipo de venta</label><md-select required ng-model=propertyCtrl.propertyPrivate.saleType ng-change=propertyCtrl.verifyAddOption(propertyCtrl.propertyPrivate.saleType,this)><md-option ng-repeat=\\\"saleType in main.FBF.lists.saleTypes\\\" ng-value=saleType.$id>{{saleType[main.lang].name}}</md-option><md-option ng-value=\\\"{action:\\'add\\',object:\\'saleType\\',reference:\\'saleTypes\\',node:\\'propertyPrivate\\'}\\\">Agregar nuevo</md-option></md-select></md-input-container><md-input-container flex=70><label>Campo Libre</label><input type=text ng-model=propertyCtrl.propertyPrivate.other></md-input-container></div><!--<div layout layout-sm=\\\"column\\\" ng-if=\\\"propertyCtrl.addingSaleType\\\">\\n      <md-input-container flex>\\n        <label>Nuevo Tipo de venta</label>\\n        <input type=\\\"name\\\" ng-model=\\\"propertyCtrl.newSaleType.name\\\">\\n        <md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"propertyCtrl.addElement(\\'saleType\\')\\\" ng-disabled=\\\"main.F.loading\\\">Agregar nuevo tipo de venta</md-button>\\n        <md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"propertyCtrl.addingSaleType=false\\\" ng-disabled=\\\"main.F.loading\\\">Cancelar</md-button>\\n      </md-input-container>\\n    </div>--><div layout=row layout-sm=column><label flex></label><div flex=nogrow><md-button ng-disabled=\\\"!propertyForm.$valid || main.F.loading\\\" ng-click=propertyCtrl.saveProperty(propertyCtrl.property,propertyCtrl.propertyPrivate,propertyCtrl.files) class=\\\"md-raised md-primary\\\">{{propertyCtrl.saveText}}</md-button></div><div flex=nogrow><md-button ng-click=propertyCtrl.goBack() class=\\\"md-raised md-primary\\\">Cancelar</md-button></div></div></form></md-content>\");\n$templateCache.put(\"app/main/views/propertiesRecords/propertiesRecords.html\",\"<md-content layout=column flex layout-padding=layout-padding layout-fill><div flex=nogrow layout=row layout-align=\\\"start center\\\"><h1 flex=nogrow>Lista de propiedades</h1></div><div flex class=content-card><md-table-container><table md-table md-row-select multiple ng-model=propertiesCtrl.selected><thead md-head md-order=query.order md-on-reorder=getDesserts><tr md-row><th md-column md-order-by=[main.lang].location><span>Ubicacion</span></th><th md-column md-order-by=[main.lang].closerReference><span>Referencia mas cercana</span></th><th md-column md-order-by=[main.lang].meters md-numeric>M2</th></tr></thead><tbody md-body><tr md-row md-select=property md-select-id=$id md-auto-select ng-repeat=\\\"property in main.FBF.lists.properties\\\"><td md-cell>{{property[main.lang].location}}</td><td md-cell>{{property[main.lang].closerReference}}</td><td md-cell>{{property[main.lang].meters|number:2}} m2</td></tr></tbody></table></md-table-container><md-fab-speed-dial md-open=propertiesCtrl.isOpen md-direction=up class=\\\"md-fling md-fab-bottom-right\\\"><md-fab-trigger><md-button aria-label=menu class=\\\"md-fab md-warn\\\"><md-icon>view_module</md-icon></md-button></md-fab-trigger><md-fab-actions><md-button ng-click=propertiesCtrl.go() aria-label=Añadir class=\\\"md-fab md-raised md-mini\\\"><md-icon>add</md-icon></md-button><md-button ng-click=propertiesCtrl.go(propertiesCtrl.selected[0]) ng-if=\\\"propertiesCtrl.selected.length==1\\\" aria-label=Editar class=\\\"md-fab md-raised md-mini\\\"><md-icon>create</md-icon></md-button><md-button ng-if=\\\"propertiesCtrl.selected.length>=1\\\" ng-click=propertiesCtrl.deleteProperty(propertiesCtrl.selected) aria-label=Eliminar class=\\\"md-fab md-raised md-mini\\\"><md-icon>clear</md-icon></md-button></md-fab-actions></md-fab-speed-dial></div></md-content>\");}]);"],"sourceRoot":"/source/"}